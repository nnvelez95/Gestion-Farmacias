# **ðŸ’Š SGF Farmacia \- Sistema de GestiÃ³n de Farmacia v2.0**

Sistema integral de Punto de Venta (POS) y GestiÃ³n de Stock para farmacias, desarrollado con **React**, **Node.js** y **MySQL**.

Esta versiÃ³n (v2.0) introduce una reestructuraciÃ³n completa de la base de datos para soportar costos, mÃ¡rgenes, precios PAMI y bÃºsqueda especÃ­fica por droga/monodroga.

## **ðŸš€ Nuevas CaracterÃ­sticas (v2.0)**

### **ðŸ“Š GestiÃ³n de Datos Profesional**

* **Base de Datos Expandida:** Soporte nativo para columnas Costo, Margen, Precio PAMI y Droga separada.  
* **Actualizador "Blindado":** Script inteligente (actualizador.js) que:  
  * Importa listas de precios masivas (CSV).  
  * Realiza **UPSERT** (Crea si es nuevo, Actualiza si existe).  
  * **ProtecciÃ³n de Stock:** Actualizar precios NO resetea el stock de la farmacia.  
  * **Safety Check:** Corta automÃ¡ticamente textos que excedan los lÃ­mites de la base de datos para evitar errores de importaciÃ³n.

### **âš¡ Punto de Venta (POS) Optimizado**

* **Atajos de Teclado Profesionales:**  
  * F1: Ayuda / Atajos.  
  * F2: **BÃºsqueda Avanzada** (Antes F10). Permite filtrar por Droga, Laboratorio, etc.  
  * F12: **Cobrar / Procesar Venta** (Antes F5). Evita conflictos con la recarga del navegador.  
* **Descuentos Globales:** Posibilidad de aplicar un porcentaje de descuento al total del ticket.  
* **BÃºsqueda Precisa:** El buscador ahora diferencia entre "Nombre Comercial" y "Droga" gracias a la nueva estructura de datos.

## **ðŸ› ï¸ InstalaciÃ³n y ConfiguraciÃ³n**

### **1\. Base de Datos**

El proyecto incluye una carpeta /db con el script de inicializaciÃ³n.

1. Crear una base de datos en MySQL llamada farmacia\_db.  
2. Ejecutar el script db/init.sql (o el script provisto en la carpeta db) para crear las tablas con la estructura extendida (soporte para VARCHAR(500) para evitar errores de longitud).

### **2\. Backend (Servidor)**

Ubicado en la carpeta /backend.

cd backend  
npm install  
\# Crear archivo .env con:  
\# DB\_HOST=127.0.0.1  
\# DB\_USER=root  
\# DB\_PASS=tu\_password  
\# DB\_NAME=farmacia\_db  
\# PORT=3001

\# Para iniciar el servidor:  
node server.js

### **3\. Frontend (Cliente)**

Ubicado en la carpeta /farmacia-cliente (o raÃ­z del cliente).

cd farmacia-cliente  
npm install  
\# Crear archivo .env con:  
\# REACT\_APP\_API\_URL=\[http://127.0.0.1:3001/api\](http://127.0.0.1:3001/api)

\# Para iniciar la interfaz:  
npm start

## **ðŸ”„ CÃ³mo Actualizar Precios**

El sistema cuenta con un **Importador Maestro** que lee archivos CSV de proveedores (formato Base\_Datos\_Productos\_Argentina\_Final.csv).

1. Colocar el archivo .csv actualizado en la carpeta /backend.  
2. Ejecutar el script actualizador:

cd backend  
node actualizador.js

**Nota:** El actualizador cortarÃ¡ automÃ¡ticamente descripciones o cÃ³digos de barras que superen los 255 caracteres para asegurar la integridad de la base de datos.

## **âŒ¨ï¸ Atajos de Teclado (Cheat Sheet)**

| Tecla | AcciÃ³n | DescripciÃ³n |
| :---- | :---- | :---- |
| **F2** | ðŸ” Buscar | Abre el modal de bÃºsqueda avanzada (Droga, Lab, etc). |
| **F12** | ðŸ’³ Cobrar | Procesa la venta actual e imprime ticket (simulado). |
| **F1** | â“ Ayuda | Muestra la lista de comandos disponibles. |
| **ESC** | âŒ Cancelar | Cierra modales o cancela ediciones. |

## **ðŸ“‚ Estructura del Proyecto**

/  
â”œâ”€â”€ db/                 \# Scripts SQL para creaciÃ³n de tablas  
â”œâ”€â”€ backend/            \# API Node.js \+ Express  
â”‚   â”œâ”€â”€ server.js       \# Servidor principal y lÃ³gica de bÃºsqueda  
â”‚   â””â”€â”€ actualizador.js \# Script de importaciÃ³n masiva (CSV \-\> MySQL)  
â””â”€â”€ farmacia-cliente/   \# Frontend React  
    â””â”€â”€ src/  
        â””â”€â”€ App.js      \# LÃ³gica principal del POS  
